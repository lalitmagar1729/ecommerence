</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script>
  // Highlight active link on click
  document.querySelectorAll('.sidebar .nav-link').forEach(link => {
    link.addEventListener('click', function () {
      document.querySelectorAll('.sidebar .nav-link').forEach(l => l.classList.remove('active'));
      this.classList.add('active');
      // Save active link in localStorage
      localStorage.setItem("activeLink", this.getAttribute("href"));
    });
  });

  // Restore active link on page load
  window.addEventListener('load', () => {
    const activeLink = localStorage.getItem("activeLink");
    if (activeLink) {
      document.querySelectorAll('.sidebar .nav-link').forEach(link => {
        if (link.getAttribute("href") === activeLink) {
          link.classList.add("active");
        } else {
          link.classList.remove("active");
        }
      });
    } else {
      // Default to Dashboard if nothing is stored
      document.querySelector('.sidebar .nav-link').classList.add("active");
    }
  });
</script>
<script>
  // Ripple Effect Cursor Position
  document.querySelectorAll('.btn-edit-animate').forEach(btn => {
    btn.addEventListener('click', function (e) {
      let rect = btn.getBoundingClientRect();
      let x = e.clientX - rect.left;
      let y = e.clientY - rect.top;
      btn.style.setProperty('--x', x + 'px');
      btn.style.setProperty('--y', y + 'px');
    });
  });
</script>
<script>
  document.querySelectorAll(".edit-btn").forEach(btn => {
    btn.addEventListener("click", function (e) {
      // Get the href
      const url = this.getAttribute("href");
      // Set iframe src dynamically
      document.getElementById("editCategoryFrame").src = url;
      // Prevent full page navigation (modal will open instead)
      e.preventDefault();
    });
  });
</script>

<script>
  document.getElementById("category_image").addEventListener("change", function (event) {
    const file = event.target.files[0];
    const previewContainer = document.getElementById("preview-container");
    const previewImage = document.getElementById("preview-image");
    const currentImageContainer = document.getElementById("current-image-container");
    const existingText = document.getElementById("existing-text");

    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        previewImage.src = e.target.result;
        previewContainer.style.display = "block";
        if (currentImageContainer) currentImageContainer.style.display = "none"; // Hide old image
        if (existingText) existingText.style.display = "none"; // Hide "Existing Image" text
      };
      reader.readAsDataURL(file);
    } else {
      previewContainer.style.display = "none";
      previewImage.src = "";
      if (currentImageContainer) currentImageContainer.style.display = "block"; // Show old image back
      if (existingText) existingText.style.display = "inline"; // Show existing text back
    }
  });
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const suborderLinks = document.querySelectorAll('#ordersSubmenu .suborder-link');
  const ordersSubmenu = document.getElementById('ordersSubmenu');

  // Restore active suborder from sessionStorage
  const activeSuborder = sessionStorage.getItem('activeSuborder');
  if(activeSuborder){
    suborderLinks.forEach(link => {
      if(link.getAttribute('href') === activeSuborder){
        link.classList.add('active');
        // Keep dropdown open
        const bsCollapse = bootstrap.Collapse.getOrCreateInstance(ordersSubmenu);
        bsCollapse.show();
      }
    });
  }

  // Add click listener to suborders
  suborderLinks.forEach(link => {
    link.addEventListener('click', () => {
      // Save clicked link in sessionStorage
      sessionStorage.setItem('activeSuborder', link.getAttribute('href'));
    });
  });

  // Optional: handle main Orders link
  const ordersLink = document.querySelector('a[href="/admin/orders"]');
  ordersLink.addEventListener('click', () => {
    sessionStorage.removeItem('activeSuborder');
  });
});
</script>

</body>

</html>