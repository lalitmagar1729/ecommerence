<%- include("navbar.ejs") %>

<section class="py-5" style="background-color: #f8f9fa;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-5 col-md-7 col-sm-10">
        <div class="card shadow-lg border-0 rounded-4">
          <div class="card-body p-5">

            <!-- Header -->
            <div class="text-center mb-4">
              <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center" style="width:70px; height:70px;">
                <i class="bi bi-key-fill text-white" style="font-size: 2rem;"></i>
              </div>
              <h2 class="mt-3 mb-2">Forgot Password</h2>
              <p class="text-secondary small">Enter your email to receive an OTP</p>

              <% if(error) { %>
                <div class="alert alert-danger mt-3" role="alert"><%= error %></div>
              <% } %>
            </div>

            <!-- Form -->
            <form method="POST" action="/forgot-password" novalidate>
              <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input 
                  type="email" 
                  id="email"
                  class="form-control" 
                  name="email" 
                  placeholder="you@example.com" 
                  required
                  aria-describedby="emailHelp"
                >
                <div id="emailHelp" class="form-text text-muted small">
                  We'll send an OTP to this email. Check your spam folder if not received.
                </div>
              </div>
              
              <button type="submit" class="btn btn-primary w-100 btn-lg" id="sendBtn">
                <span id="btnText">Send OTP</span>
                <span id="btnSpinner" class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
              </button>
            </form>

            <!-- Terms & Policy -->
            <div class="text-center mt-4 small text-muted">
              By proceeding, you agree to our 
              <a href="/terms" class="text-decoration-none">Terms of Service</a> 
              and 
              <a href="/privacy" class="text-decoration-none">Privacy Policy</a>.
            </div>

            <!-- Back to login -->
            <div class="text-center mt-3">
              <a href="/login" class="text-decoration-none">&larr; Back to Login</a>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<%- include("footer.ejs") %>

<script>
  // Button loading state
  const form = document.querySelector('form');
  const sendBtn = document.getElementById('sendBtn');
  const btnText = document.getElementById('btnText');
  const btnSpinner = document.getElementById('btnSpinner');

  form.addEventListener('submit', () => {
    sendBtn.disabled = true;
    btnText.textContent = 'Sending...';
    btnSpinner.classList.remove('d-none');
  });
</script>
